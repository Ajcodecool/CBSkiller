<!DOCTYPE html>

<html lang="en">
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js/dist/umd/supabase.min.js"></script>
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Crooms Connect</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
<!-- Add Supabase JS Client -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js/dist/umd/supabase.min.js"></script>
<script>
</script>
<!-- Simple Demo Form and List -->
<form id="reminder-form">
  <input type="text" id="title" placeholder="Reminder Title" required />
  <input type="datetime-local" id="datetime" required />
  <button type="submit">Add Reminder</button>
</form>
<ul id="reminder-list"></ul>
</style>
</head>
<body id="app-body">
<div class="header">
<div class="flex items-center">
<span class="title-text">CROOMS CONNECT</span>
<span class="user-id-display" id="userIdDisplay">Local Theme Storage Active</span>
</div>
<span>ALPHA</span>
</div>
<div class="left-box">
<button data-tab="home">Home</button>
<button data-tab="study">Study Tools</button>
<button data-tab="community">Community</button>
<button data-tab="polls">Polls</button>
<button data-tab="games">Games</button>
<button data-tab="settings">Settings</button>
</div>
<div class="right-box">
<div class="section" id="info-section" style="color: var(--accent-yellow); font-weight: bold;">Loading current time and day type...</div>
<div class="section" id="period-timer">Loading Period Timer...</div>
<div class="section" id="current-lunch-display">Loading Lunch...</div>
<div class="info">
<p data-food="Mango">M – Mango</p>
<p data-food="Mustard">T – Mustard</p>
<p data-food="Still Water">W – Still Water</p>
<p data-food="Burgers">T – 41 Burgers</p>
<p data-food="Chickens">F – 67 Chickens</p>
</div>
</div>
<div class="tab-content active" id="home">
<section>
<h1>Welcome to Crooms Connect</h1>
<p>Your student hub with resources, schedules, and tools.</p>
<div class="card-grid">
<div class="card"><span class="icon"> 📰 </span><h3>News</h3><p>Latest announcements from campus.</p></div>
<div class="card" onclick="window.location.href='events.html'" style="cursor: pointer;">
<span class="icon"> 📅 </span>
<h3>Events</h3>
<p>See what’s happening this week.</p>
</div>
</div>
</section>
</div>
<div class="tab-content" id="study">
<section>
<h1>Study Tools</h1>
<p>Helpful tools to keep you learning.</p>
<div class="card-grid">
<div class="card"><span class="icon"> 📝 </span><h3>Flashcards</h3><p>Review terms quickly.</p></div>
<div class="card"><span class="icon"> ❓ </span><h3>Practice Quizzes</h3><p>Test your knowledge.</p></div>
</div>
</section>
</div>
<div class="tab-content" id="community">
<section>
<h1>Community</h1>
<p>Connect with classmates and teachers.</p>
<div class="card-grid">
<div class="card"><span class="icon"> 👥 </span><h3>Clubs</h3><p>Find and join school clubs.</p></div>
<div class="card"><span class="icon"> 💬 </span><h3>Forums<p>Discuss topics with peers.</p></h3></div>
</div>
</section>
</div>
<div class="tab-content" id="polls">
<section>
<h1>Polls</h1>
<p>Vote on important topics.</p>
<div class="card-grid">
<div class="card"><span class="icon"> 🗳️ </span><h3>Current Poll</h3><p>Vote on this week’s topic.</p></div>
<div class="card"><span class="icon"> 📊 </span><h3>Results</h3><p>See community votes.</p></div>
</div>
</section>
</div>
<div class="tab-content" id="games">
<section>
<h1>Games</h1>
<p>Fun mini-games to enjoy during breaks.</p>
<div class="card-grid">
<div class="card"><span class="icon"> 🎮 </span><h3>Trivia</h3><p>Test your knowledge in quick rounds.</p></div>
<div class="card"><span class="icon"> 🧩 </span><h3>Puzzle</h3><p>Relax and challenge your mind.</p></div>
</div>
</section>
</div>
<div class="tab-content" id="settings">
<section>
<div class="card" id="supabase-reminders-card">
<span class="icon"> 🔔 </span>
<h3>Cloud Reminders</h3>
<p>Reminders saved to Supabase (shared across devices).</p>
<form class="settings-form" id="cloud-reminder-form" style="margin-bottom:10px;">
<label for="cloud-reminder-title">Title</label>
<input id="cloud-reminder-title" placeholder="e.g., Study for Math Test" required="" type="text"/>
<label for="cloud-reminder-datetime">Date &amp; Time</label>
<input id="cloud-reminder-datetime" required="" type="datetime-local"/>
<button class="save-settings-button" style="background: linear-gradient(45deg, var(--accent-blue), #2a8dff);" type="submit">Add Cloud Reminder</button>
<div class="p-2 mt-2 text-center rounded-lg font-medium" id="cloud-reminder-message" style="background-color: var(--primary-bg); color: var(--text-color);"></div>
</form>
<ul id="cloud-reminder-list"></ul>
</div>
<h1>User Settings &amp; Customization</h1>
<p>Personalize your experience. Your selections are saved locally.</p>
<div class="card-grid">
<div class="card theme-selector-card">
<span class="icon"> 🌓 </span>
<h3>Appearance</h3>
<p style="margin-bottom: 20px; font-size: 14px;">Toggle between Dark and Light mode.</p>
<div class="flex flex-col space-y-4">
<button class="theme-button" id="dark-mode-button">
<span class="icon"> 🌙 </span> Dark Mode
</button>
<button class="theme-button" id="light-mode-button">
<span class="icon"> ☀️ </span> Light Mode
</button>
</div>
<div class="p-3 mt-4 text-center rounded-lg font-medium hidden" id="messageBox" style="background-color: var(--primary-bg); color: var(--text-color);"></div>
</div>
<div class="card period-names-card">
<span class="icon"> 📚 </span>
<h3>Period Names</h3>
<p style="margin-bottom: 10px; font-size: 14px;">Personalize the names of your classes.</p>
<form class="settings-form" id="period-names-form">
<button class="save-settings-button" type="submit">Save Period Names</button>
</form>
<div class="p-3 mt-4 text-center rounded-lg font-medium hidden" id="periodMessage" style="background-color: var(--primary-bg); color: var(--text-color);"></div>
</div>
<div class="card lunch-names-card">
<span class="icon"> 🍔 </span>
<h3>Lunch Periods</h3>
<p style="margin-bottom: 10px; font-size: 14px;">Set which lunch you have for each schedule type.</p>
<form class="settings-form" id="lunch-names-form">
<label for="lunch-5th_Period_A">5th Period Lunch (Usually A Lunch)</label>
<input id="lunch-5th_Period_A" name="5th Period A" placeholder="A Lunch" type="text" value="A Lunch"/>
<label for="lunch-5th_Period_B">5th Period Lunch (Usually B Lunch)</label>
<input id="lunch-5th_Period_B" name="5th Period B" placeholder="B Lunch" type="text" value="B Lunch"/>
<label for="lunch-Homeroom_A">Homeroom Lunch (Wednesday A Lunch)</label>
<input id="lunch-Homeroom_A" name="Homeroom A" placeholder="A Lunch" type="text" value="A Lunch"/>
<label for="lunch-Homeroom_B">Homeroom Lunch (Wednesday B Lunch)</label>
<input id="lunch-Homeroom_B" name="Homeroom B" placeholder="B Lunch" type="text" value="B Lunch"/>
<button class="save-settings-button" type="submit">Save Lunch Periods</button>
</form>
<div class="p-3 mt-4 text-center rounded-lg font-medium hidden" id="lunchMessage" style="background-color: var(--primary-bg); color: var(--text-color);"></div>
</div>
<div class="card" id="notifications-card" style="cursor: pointer;">
<span class="icon"> 🔔 </span>
<h3>Reminders</h3>
<p>Set up alerts for important events.</p>
<button id="test-notification-button" style="margin-top: 10px; background: var(--accent-blue); color: var(--primary-bg); border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer; font-size: 12px; font-weight: bold;">Test Slide-in</button>
</div>
<div class="card"><span class="icon"> 🔑 </span><h3>Account</h3><p>Privacy and security options.</p></div>
<div class="card"><span class="icon"> ⚙️ </span><h3>Display</h3><p>Adjust font size and layout.</p></div>
</div>
</section>
</div>
<div class="modal-overlay" id="legal-modal">
<div class="modal-content">
<button class="close-button" id="close-modal-button">×</button>
<h1>Legal Disclaimer <span style="font-size: 14px; color: var(--text-color);"> (Last Updated: October 2nd, 2025)</span></h1>
<div class="disclaimer-point">
<strong>1. General Information &amp; Accuracy</strong>
<p>The information provided by Crooms Connect is for general informational purposes only. All information is provided in good faith;
</p></div>
<div class="disclaimer-point">
<strong>2. Educational Purpose Only</strong>
<p>This platform is intended solely as an educational and communication tool for students.
</p></div>
<div class="disclaimer-point">
<strong>3. External Links Disclaimer</strong>
<p>The platform may contain links to external websites that are not provided or maintained by or in any way affiliated with Crooms Connect.
</p></div>
<div class="disclaimer-point">
<strong>4. "AS IS" and "AS AVAILABLE" Disclaimer</strong>
<p>The platform is provided "AS IS" and "AS AVAILABLE" and with all faults and defects without warranty of any kind.</p>
</div>
<div class="disclaimer-point">
<strong>5. User-Generated Content</strong>
<p>Users are responsible for any content they post. We are not responsible for user-generated content, but we reserve the right to remove any content we deem inappropriate or harmful.</p></div>
<div class="disclaimer-point">
<strong>6. Limitation of Liability</strong>
<p>Under no circumstance shall we be liable for any loss or damage of any kind incurred as a result of the use of the platform or reliance on any information provided.
</p></div>
<div class="disclaimer-point">
<strong>7. Indemnification Clause</strong>
<p>You agree to defend, indemnify, and hold harmless Crooms Connect, its developers, and affiliates from and against any claims, damages, obligations, losses, liabilities, costs, or debt arising from: (a) your use of and access to the platform;
</p></div>
<div class="disclaimer-point">
<strong>8. Intellectual Property (IP)</strong>
<p>All original content, features, and functionality (excluding user-generated content) are and will remain the exclusive property of Crooms Connect.
</p></div>
<div class="disclaimer-point">
<strong>9. User Conduct &amp; Termination</strong>
<p>We reserve the right, but not the obligation, to monitor and remove any User-Generated Content that we deem inappropriate, illegal, or in violation of these terms.
</p></div>
</div>
</div>
<div class="modal-overlay" id="reminder-modal">
<div class="modal-content">
<button class="close-button" id="close-reminder-modal-button">×</button>
<h1>Set New Reminder</h1>
<form class="settings-form" id="reminder-form">
<label for="reminder-title">Title</label>
<input id="reminder-title" placeholder="e.g., Study for Math Test" required="" type="text"/>
<label for="reminder-date">Date</label>
<input id="reminder-date" required="" type="date"/>
<label for="reminder-time">Time</label>
<input id="reminder-time" required="" type="time"/>
<button class="save-settings-button" style="background: linear-gradient(45deg, var(--accent-blue), #2a8dff);" type="submit">Create Reminder</button>
<div id="reminder-list-container" style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 15px;">
<h3 style="color: var(--accent-yellow); margin-bottom: 10px;">Scheduled Reminders</h3>
<ul id="active-reminders-list"></ul>
</div>
<div class="p-3 mt-4 text-center rounded-lg font-medium hidden" id="reminder-message" style="background-color: var(--primary-bg); color: var(--text-color);"></div>
</form>
</div>
</div>
<div id="in-app-notification">
<h4><span>🔔</span> Reminder Fired</h4>
<p id="notification-message">Your reminder message goes here.</p>
</div>
<footer>
<p>© 2025 Crooms Connect | <a id="open-legal-modal">Legal Disclaimer</a></p>
</footer>
<img id="preview"/>
<script>
<label for="name-${key.replace(/\s/g, '_')}">${key}</label>
<input type="text" id="name-${key.replace(/\s/g, '_')}" name="${key}" value="${currentName}" placeholder="${key}">
<span><strong>${r.title}</strong><br><small style="opacity: 0.8; color: var(--accent-yellow);">${dateStr} @ ${timeStr}</small></span>
<button class="delete-reminder-button" data-id="${r.id}" style="background: var(--accent-red); color: var(--primary-bg); border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer; font-size: 12px; font-weight: bold;">&times; Delete</button>
</script>
<script>
const cloudReminderForm = document.getElementById('cloud-reminder-form');
const cloudReminderMsg = document.getElementById('cloud-reminder-message');
const cloudReminderList = document.getElementById('cloud-reminder-list');

function showCloudMsg(msg, type='') {
  cloudReminderMsg.textContent = msg;
  cloudReminderMsg.style.color = type === 'error' ? 'red' : 'green';
  setTimeout(() => cloudReminderMsg.textContent = '', 4000);
}

async function addCloudReminder(title, datetime) {
  const { data: userData } = await supabase.auth.getUser();
  const userId = userData?.user?.id;

  if (!userId) {
    showCloudMsg('You must be logged in to save reminders.', 'error');
    return;
  }

  const { error } = await supabase
    .from('reminders')
    .insert([{ title, timestamp: datetime, user_id: userId }]);

  if (error) {
    showCloudMsg('Error saving reminder: ' + error.message, 'error');
  } else {
    showCloudMsg('Reminder saved!', '');
    fetchCloudReminders();
  }
}

async function fetchCloudReminders() {
  const { data: userData } = await supabase.auth.getUser();
  const userId = userData?.user?.id;

  if (!userId) {
    cloudReminderList.innerHTML = '<li>Please log in to view your reminders.</li>';
    return;
  }

  const { data, error } = await supabase
    .from('reminders')
    .select('*')
    .eq('user_id', userId)
    .order('timestamp', { ascending: true });

  cloudReminderList.innerHTML = '';
  if (error) {
    cloudReminderList.innerHTML = '<li>Error loading reminders.</li>';
    return;
  }
  if (!data || data.length === 0) {
    cloudReminderList.innerHTML = '<li>No cloud reminders found.</li>';
    return;
  }
  data.forEach(reminder => {
    const li = document.createElement('li');
    li.innerText = `${reminder.title} - ${reminder.timestamp}`;
    cloudReminderList.appendChild(li);
  });
}

document.addEventListener('DOMContentLoaded', () => {
  fetchCloudReminders();
  if(cloudReminderForm){
    cloudReminderForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      const title = document.getElementById('cloud-reminder-title').value;
      const datetime = document.getElementById('cloud-reminder-datetime').value;
      await addCloudReminder(title, datetime);
      cloudReminderForm.reset();
    });
  }
});
</script></body>
</html>
